---
title: "SOC-5811 Week 3: Quantitative research methods"
author: "Nick Graetz"
date: "9/17/2025"
output: 
    beamer_presentation:
        incremental: false
        includes: 
            in_header: Minnesota.tex
---

```{r setup, include=FALSE}
## Libraries
library(tidyverse)
library(data.table)
library(ggplot2)
library(haven)
library(formatR)
library(marginaleffects)
library(sjlabelled)
library(arrow)
knitr::opts_chunk$set(
 fig.width = 6,
 fig.height = 4,
 warning = FALSE, 
 message = FALSE,
 out.width="80%"
)
dropbox <- 'C:/Users/ngraetz/Dropbox/'
fig_dir <- paste0(dropbox, 'Minnesota/repos/soc5811/figures/')
data_dir <- paste0(dropbox, 'Minnesota/repos/soc5811/data/')
```

---

\frametitle{Quantitative methods}

>- \textbf{Empiricism:} social theories imply empirical claims that are falsifiable.

>- Data doesn't speak for itself; it must be carefully interpreted, summarize, and analyzed.

---

\frametitle{Quantitative methods}

>- Statistics is about providing a concise summary of empirical data.

>- This involves analyzing \textbf{samples} drawn from \textbf{populations}.

---

\frametitle{Samples and populations}

Say I have a bag filled with 50 marbles of different colors. I reach in the bag and pull out 10 marbles. I see that 6 marbles are blue and 4 are red.

>- What is the population and sample here?

>- What can I say about the sample? What can I say about the population?

---

\frametitle{Generalization}

\textbf{Summarizing in-sample}

>- \textbf{Measurement}: generalizing from \textbf{observed measurements} to the \textbf{underlying constructs of interest}.
>   - Is what I'm measuring what I actually care about?
>   - *I ask 30 people whether they graduated from college; what am I measuring?*
>   - Measurement theory: very central to psychology, education, etc. 

>- \textbf{Generalizing from sample to population}.
>   - Is what I see in the sample also true in the population?
>   - *I ask 30 people whether they graduated from college; what can I say about the population from which I sampled these people?*

---

\includegraphics[page=1,width = 1\textwidth]{figures/epistemology.pdf}

---

\includegraphics[page=3,width = 1\textwidth]{figures/epistemology.pdf}

---

\textbf{Generalization}

>- \textbf{Forecasting}: generalizing from the present to the future.
>   - *I have data on whether on not it has rained every day for the past ten years. Will it rain tomorrow?*

>- \textbf{Causal inference}: generalizing from treatment group to control group.
>   - *I measure the rate of a specific disease among a group that was vaccinated for that disease and one that was not. Was the vaccine effective at reducing the disease?*

---

\includegraphics[page=4,width = 1\textwidth]{figures/epistemology.pdf}

---

\frametitle{Generalization: Summary}

1. Measurement.
2. Generalizing from sample to population.
3. Comparison (e.g., causal inference).
4. Forecasting.

---

\frametitle{Generalization: Summary}

1. Measurement.
2. \textbf{Generalizing from sample to population.}
3. \textbf{Comparison (e.g., causal inference.)}
4. Forecasting.

---

\frametitle{Quantitative data}

Data on US populations by state/region

\small
```{r, echo=T}
census <- read_dta(paste0(data_dir,
                          's5811-msa.dta')) %>% 
  mutate(across(c(state,region,isusa), as_label)) %>%
  head()
```

---

\frametitle{Quantitative data}

Continuous and discrete variables

\small
```{r, echo=T}
census %>% 
  select(population,region) %>% 
  slice(1:5)
```

---

\frametitle{Levels of measurement}

>- \textbf{Continuous variables:} infinite number of values in a given interval (e.g., time)

>- \textbf{Discrete variables:} limited to a specific set of outcomes (e.g., die roll)
>   - Ordinal: ordered, discrete categories (e.g., ranks in a race)
>   - Nominal: unordered, discrete categories (e.g., field of study)
>   - Binary/dichotomous: special case of nominal variable that only has two values (e.g., coin flip)

>- Measurement decisions are not always clear cut (e.g., age)

---

\frametitle{Summarizing data}

\small
```{r, echo=F}
gss <- read_dta(paste0(data_dir,
                       'GSS2018.dta')) %>% 
  select(degree,agekdbrn,realrinc,race,age,prestg10,educ,happy) %>%
  mutate(across(c(degree,race,happy), as_label))
```

```{r, echo=T}
head(gss)
```

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
gss %>%
  summarise(mean_income=mean(realrinc))
```

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
gss %>%
  summarise(mean_income=mean(realrinc, na.rm=T))
```

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
gss %>%
  group_by(degree) %>% 
  summarise(mean_income=mean(realrinc, na.rm=T))
```

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
gss %>%
  group_by(degree) %>% 
  summarise(n=n()) %>%
  mutate(prop=n/sum(n)*100)
```

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
plot_data <- gss %>%
  group_by(degree) %>% 
  summarise(n=n()) %>%
  mutate(prop=n/sum(n)*100)
```

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
plot <- ggplot(data=plot_data,
               aes(x=degree,y=prop)) + 
  geom_bar(stat='identity') +
  labs(x='Degree',y='Percent') + 
  theme_bw()
```

---

\frametitle{Summarizing data}

\small
```{r, echo=F}
print(plot)
```

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
plot <- ggplot(data=gss,
               aes(x=realrinc)) + 
  geom_histogram() +
  labs(x='Income',y='Count') + 
  theme_bw()
```

---

\frametitle{Summarizing data}

\small
```{r, echo=F}
print(plot)
```

---

\frametitle{Summarizing data}

* Histograms of continuous data: why do we have to bin?

* How do we choose bins?

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
plot <- ggplot(data=gss,
               aes(x=realrinc)) + 
  geom_density(fill='grey') + 
  labs(x='Income',y='Density') + 
  theme_bw()
```

---

\frametitle{Summarizing data}

\small
```{r, echo=F}
print(plot)
```

---

\frametitle{Summarizing data}

Add measures of central tendency: mean and median

\small
```{r, echo=T}
summaries <- gss %>%
  summarise(mean_income=mean(realrinc, na.rm=T),
            median_income=median(realrinc, na.rm=T))
summaries
```

---

\frametitle{Summarizing data}

Reshape:

\small
```{r, echo=T}
summaries <- gss %>%
  summarise(mean_income=mean(realrinc, na.rm=T),
            median_income=median(realrinc, na.rm=T)) %>%
  pivot_longer(cols=contains('income'),
               names_to='Measure',
               values_to='income')
summaries
```

---

\frametitle{Summarizing data}

\small
```{r, echo=T}
plot <- ggplot(data=gss,
               aes(x=realrinc)) + 
  geom_density() + 
  geom_vline(data=summaries,
             aes(xintercept=income,
                 color=Measure),
             size=1) + 
  labs(x='Income',y='Density') + 
  theme_bw()
```

---

\frametitle{Summarizing data}

\small
```{r, echo=F}
print(plot)
```

---

\frametitle{Review}

What do we want to do with data?

>- Manipulate variables, which might involve conditional statements
>- \textbf{Merge:} combine two datasets on matching columns
>- \textbf{Reshape:} wide to long, long to wide
>- \textbf{Summarize:} aggregate over rows

---

\frametitle{Univariate summary statistics}

Examine distribution:

\small
```{r, echo=T}
plot <- ggplot(data=gss,
               aes(y=realrinc,x=degree)) + 
  geom_boxplot() + 
  labs(x='Degree',y='Income') + 
  theme_bw()
```

---

\frametitle{Univariate summary statistics}

\small
```{r, echo=F}
print(plot)
```

---

\frametitle{Bivariate relationships}

Correlation matrix:

\small
```{r, echo=T}
gss %>% 
  select(educ,prestg10,realrinc,agekdbrn) %>%
  cor(use = 'complete.obs') %>% 
  round(2)
```

---

\frametitle{Bivariate relationships}

Cross-tabulations table:

\small
```{r, echo=T}
gss %>% 
  select(degree,race) %>%
  table() %>% 
  prop.table() %>%
  round(2)
```

---

\frametitle{Bivariate relationships}

Examine bivariate relationship:

\small
```{r, echo=T}
plot <- ggplot(data=gss,
               aes(x=educ,y=prestg10)) + 
  geom_point() + 
  theme_bw()
```

---

\frametitle{Bivariate relationships}

\small
```{r, echo=F}
print(plot)
```

---

\frametitle{Bivariate relationships}

\small
```{r, echo=T}
plot <- ggplot(data=gss,
               aes(x=educ,y=prestg10)) + 
  geom_point() + 
  geom_smooth(method='lm') + 
  theme_bw()
```

---

\frametitle{Bivariate relationships}

\small
```{r, echo=F}
print(plot)
```

---

\frametitle{Stats and social science theory}

How do we create models?

* Deterministic processes

* Stochastic processes
